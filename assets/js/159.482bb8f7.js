(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{484:function(s,a,e){"use strict";e.r(a);var t=e(7),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"第05章-排序与分页"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第05章-排序与分页"}},[s._v("#")]),s._v(" 第05章_排序与分页")]),s._v(" "),a("p",[s._v("讲师：尚硅谷-宋红康（江湖人称：康师傅）")]),s._v(" "),a("p",[s._v("官网："),a("a",{attrs:{href:"http://www.atguigu.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://www.atguigu.com"),a("OutboundLink")],1)]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_1-排序数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-排序数据"}},[s._v("#")]),s._v(" 1. 排序数据")]),s._v(" "),a("h3",{attrs:{id:"_1-1-排序规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-排序规则"}},[s._v("#")]),s._v(" 1.1 排序规则")]),s._v(" "),a("ul",[a("li",[s._v("使用 ORDER BY 子句排序\n"),a("ul",[a("li",[a("strong",[s._v("ASC（ascend）: 升序")])]),s._v(" "),a("li",[a("strong",[s._v("DESC（descend）:降序")])])])]),s._v(" "),a("li",[a("strong",[s._v("ORDER BY 子句在SELECT语句的结尾。")])])]),s._v(" "),a("h3",{attrs:{id:"_1-2-单列排序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-单列排序"}},[s._v("#")]),s._v(" 1.2 单列排序")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT   last_name, job_id, department_id, hire_date\nFROM     employees\nORDER BY hire_date ;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"/chaos_front/img/mysql/1554974255957.png",alt:"1554974255957"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/chaos_front/img/mysql/1554974260133.png",alt:"1554974260133"}})]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT   last_name, job_id, department_id, hire_date\nFROM     employees\nORDER BY hire_date DESC ;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"/chaos_front/img/mysql/1554974822229.png",alt:"1554974822229"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/chaos_front/img/mysql/1554974827522.png",alt:"1554974827522"}})]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT employee_id, last_name, salary*12 annsal\nFROM   employees\nORDER BY annsal;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"/chaos_front/img/mysql/1554974853194.png",alt:"1554974853194"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/chaos_front/img/mysql/1554974858252.png",alt:"1554974858252"}})]),s._v(" "),a("h3",{attrs:{id:"_1-3-多列排序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-多列排序"}},[s._v("#")]),s._v(" 1.3 多列排序")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT last_name, department_id, salary\nFROM   employees\nORDER BY department_id, salary DESC;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"/chaos_front/img/mysql/1554974901572.png",alt:"1554974901572"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/chaos_front/img/mysql/1554974907498.png",alt:"1554974907498"}})]),s._v(" "),a("ul",[a("li",[s._v("可以使用不在SELECT列表中的列排序。")]),s._v(" "),a("li",[s._v("在对多列进行排序的时候，首先排序的第一列必须有相同的列值，才会对第二列进行排序。如果第一列数据中所有值都是唯一的，将不再对第二列进行排序。")])]),s._v(" "),a("h2",{attrs:{id:"_2-分页"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-分页"}},[s._v("#")]),s._v(" 2. 分页")]),s._v(" "),a("h3",{attrs:{id:"_2-1-背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-背景"}},[s._v("#")]),s._v(" 2.1 背景")]),s._v(" "),a("p",[s._v("背景1：查询返回的记录太多了，查看起来很不方便，怎么样能够实现分页查询呢？")]),s._v(" "),a("p",[s._v("背景2：表里有 4 条数据，我们只想要显示第 2、3 条数据怎么办呢？")]),s._v(" "),a("h3",{attrs:{id:"_2-2-实现规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-实现规则"}},[s._v("#")]),s._v(" 2.2 实现规则")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("分页原理")]),s._v(" "),a("p",[s._v("所谓分页显示，就是将数据库中的结果集，一段一段显示出来需要的条件。")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("MySQL中使用 LIMIT 实现分页")])])]),s._v(" "),a("li",[a("p",[s._v("格式：")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("LIMIT [位置偏移量,] 行数\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("第一个“位置偏移量”参数指示MySQL从哪一行开始显示，是一个可选参数，如果不指定“位置偏移量”，将会从表中的第一条记录开始（第一条记录的位置偏移量是0，第二条记录的位置偏移量是1，以此类推）；第二个参数“行数”指示返回的记录条数。")])]),s._v(" "),a("li",[a("p",[s._v("举例")])])]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("--前10条记录：\nSELECT * FROM 表名 LIMIT 0,10;\n或者\nSELECT * FROM 表名 LIMIT 10;\n\n--第11至20条记录：\nSELECT * FROM 表名 LIMIT 10,10;\n\n--第21至30条记录： \nSELECT * FROM 表名 LIMIT 20,10;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("blockquote",[a("p",[s._v("MySQL 8.0中可以使用“LIMIT 3 OFFSET 4”，意思是获取从第5条记录开始后面的3条记录，和“LIMIT 4,3;”返回的结果相同。")])]),s._v(" "),a("ul",[a("li",[s._v("分页显式公式**：（当前页数-1）"),a("em",[s._v("每页条数，每页条数")]),s._v("*")])]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT * FROM table \nLIMIT(PageNo - 1)*PageSize,PageSize;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("注意：LIMIT 子句必须放在整个SELECT语句的最后！")])]),s._v(" "),a("li",[s._v("使用 LIMIT 的好处")])]),s._v(" "),a("p",[s._v("约束返回结果的数量可以"),a("code",[s._v("减少数据表的网络传输量")]),s._v("，也可以"),a("code",[s._v("提升查询效率")]),s._v("。如果我们知道返回结果只有 1 条，就可以使用"),a("code",[s._v("LIMIT 1")]),s._v("，告诉 SELECT 语句只需要返回一条记录即可。这样的好处就是 SELECT 不需要扫描完整的表，只需要检索到一条符合条件的记录即可返回。")]),s._v(" "),a("h3",{attrs:{id:"_2-3-拓展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-拓展"}},[s._v("#")]),s._v(" 2.3 拓展")]),s._v(" "),a("p",[s._v("在不同的 DBMS 中使用的关键字可能不同。在 MySQL、PostgreSQL、MariaDB 和 SQLite 中使用 LIMIT 关键字，而且需要放到 SELECT 语句的最后面。")]),s._v(" "),a("ul",[a("li",[s._v("如果是 SQL Server 和 Access，需要使用 "),a("code",[s._v("TOP")]),s._v(" 关键字，比如：")])]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT TOP 5 name, hp_max FROM heros ORDER BY hp_max DESC\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("如果是 DB2，使用"),a("code",[s._v("FETCH FIRST 5 ROWS ONLY")]),s._v("这样的关键字：")])]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT name, hp_max FROM heros ORDER BY hp_max DESC FETCH FIRST 5 ROWS ONLY\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("如果是 Oracle，你需要基于 "),a("code",[s._v("ROWNUM")]),s._v(" 来统计行数：")])]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT rownum,last_name,salary FROM employees WHERE rownum < 5 ORDER BY salary DESC;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("需要说明的是，这条语句是先取出来前 5 条数据行，然后再按照 hp_max 从高到低的顺序进行排序。但这样产生的结果和上述方法的并不一样。我会在后面讲到子查询，你可以使用")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT rownum, last_name,salary\nFROM (\n    SELECT last_name,salary\n    FROM employees\n    ORDER BY salary DESC)\nWHERE rownum < 10;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("得到与上述方法一致的结果。")])])}),[],!1,null,null,null);a.default=n.exports}}]);