(window.webpackJsonp=window.webpackJsonp||[]).push([[210],{536:function(l,s,o){"use strict";o.r(s);var t=o(7),n=Object(t.a)({},(function(){var l=this,s=l._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":l.$parent.slotKey}},[s("h1",{attrs:{id:"mysql使用二进制日志还原数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql使用二进制日志还原数据库"}},[l._v("#")]),l._v(" MySQL使用二进制日志还原数据库")]),l._v(" "),s("p",[l._v("二进制日志中记录了用户对数据库更改的所有操作，如 INSERT 语句、UPDATE 语句、CREATE 语句等。如果数据库因为操作不当或其它原因丢失了数据，可以通过二进制日志来查看在一定时间段内用户的操作，结合数据库备份来还原数据库。")]),l._v(" "),s("p",[l._v("下面将为读者详细介绍使用二进制日志还原数据库的方法。")]),l._v(" "),s("p",[l._v("数据库遭到意外损坏时，应该先使用最近的备份文件来还原数据库。另外备份之后，数据库可能进行了一些更新，这时可以使用二进制日志来还原。因为二进制日志中存储了更新数据库的语句，如 UPDATE 语句、INSERT 语句等。")]),l._v(" "),s("p",[l._v("二进制日志还原数据库的命令如下：")]),l._v(" "),s("p",[l._v("mysqlbinlog filename.number | mysql -u root -p")]),l._v(" "),s("p",[l._v("以上命令可以理解成，先使用 mysqlbinlog 命令来读取 filename.number 中的内容，再使用 mysql 命令将这些内容还原到数据库中。")]),l._v(" "),s("p",[l._v("技巧：二进制日志虽然可以用来还原 MySQL 数据库，但是其占用的磁盘空间也是非常大的。因此，在备份 MySQL 数据库之后，应该删除备份之前的二进制日志。如果备份之后发生异常，造成数据库的数据损失，可以通过备份之后的二进制日志进行还原。")]),l._v(" "),s("p",[l._v("使用 mysqlbinlog 命令进行还原操作时，必须是编号（number）小的先还原。例如，mylog.000001 必须在 mylog.000002 之前还原。")]),l._v(" "),s("h4",{attrs:{id:"例-1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#例-1"}},[l._v("#")]),l._v(" 例 1")]),l._v(" "),s("p",[l._v("下面使用二进制日志来还原数据库，代码如下：")]),l._v(" "),s("p",[l._v("mysqlbinlog mylog.000001 | mysql -u root -p"),s("br"),l._v("\nmysqlbinlog mylog.000002 | mysql -u root -p"),s("br"),l._v("\nmysqlbinlog mylog.000003 | mysql -u root -p"),s("br"),l._v("\nmysqlbinlog mylog.000004 | mysql -u root -p")])])}),[],!1,null,null,null);s.default=n.exports}}]);