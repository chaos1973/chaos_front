(window.webpackJsonp=window.webpackJsonp||[]).push([[222],{547:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("redis集群模式的搭建(以单服务器，多端口为例子)")]),s._v(" "),a("h4",{attrs:{id:"_1-修改redis-conf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-修改redis-conf"}},[s._v("#")]),s._v(" 1.修改redis.conf")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#改为后台模式\ndaemonize yes\n\n#去掉保护模式\nprotected-mode no\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h4",{attrs:{id:"_2-复制redis-conf-六份-三主三从"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-复制redis-conf-六份-三主三从"}},[s._v("#")]),s._v(" 2.复制redis.conf 六份，三主三从")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CLenovo%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221206105631830.png",alt:"image-20221206105631830"}})]),s._v(" "),a("p",[s._v("每一个配置改为对应的端口")]),s._v(" "),a("div",{staticClass:"language-C line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[s._v("include "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n\npidfile "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/run/redis_6379.pid"')]),s._v("\n\nport "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n\ndbfilename "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dump6379.db"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("daemonize")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[s._v("yes")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("protected")]),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mode no")])]),s._v("\n\ncluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("enabled yes\n\ncluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("file nodes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379.")]),s._v("conf\n\ncluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15000")]),s._v("\n\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("h4",{attrs:{id:"_3-依次启动六个服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-依次启动六个服务"}},[s._v("#")]),s._v(" 3.依次启动六个服务")]),s._v(" "),a("p",[s._v("我在此遇到了-bash redis-server 未找到命令的问题")]),s._v(" "),a("p",[s._v("解决方案")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ln -s /usr/local/redis-cluster/bin/redis-server /usr/bin/redis-server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("启动后 ps -ef|grep redis 查看服务是否启动成功")]),s._v(" "),a("p",[s._v("教学视频中出现六个服务，我由于include 了redis.conf,出现了7个，某一步有问题，将单节点的服务kill掉")]),s._v(" "),a("h4",{attrs:{id:"_4-将六个服务合成一个集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-将六个服务合成一个集群"}},[s._v("#")]),s._v(" 4.将六个服务合成一个集群")]),s._v(" "),a("p",[s._v("cd /usr/local/redis-cluster/src")]),s._v(" "),a("p",[s._v("执行命令")]),s._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster create "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("replicas "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6389")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6390")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6391")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_5-linux-放开端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-linux-放开端口"}},[s._v("#")]),s._v(" 5.linux 放开端口")]),s._v(" "),a("p",[s._v("记住要再防火墙中将端口放开\n"),a("a",{attrs:{href:"https://blog.csdn.net/qq_36763419/article/details/126055960",target:"_blank",rel:"noopener noreferrer"}},[s._v("(32条消息) Springboot整合Redis集群实战详解_陌守的博客-CSDN博客_springboot redis集群"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("这篇文章也可以作文参考")])])}),[],!1,null,null,null);a.default=r.exports}}]);