---
title: Mysql备份类型
date: 2023-01-29 15:16:36
permalink: /pages/9407ec/
categories:
  - 数据库
  - mysql数据库
  - mysql数据库备份与恢复
tags:
  - 
author: 
  name: ~chao
  link: https://github.com/chaos1973/chaos_front
---
### Mysql备份类型

备份是以防万一的一种必要手段，在出现硬件损坏或非人为的因素而导致数据丢失时，可以使用备份恢复数据，以将损失降低到最小程度，因此备份是必须的。备份可以分为以下几个类型。  

根据备份的方法（是否需要数据库离线）可以将备份分为：

- 热备（Hot Backup）
- 冷备（Cold Backup）
- 温备（Warm Backup）

  

热备份可以在数据库运行中直接备份，对正在运行的数据库操作没有任何的影响，数据库的读写操作可以正常执行。这种方式在 MySQL 官方手册中称为 Online Backup（在线备份）。  

冷备份必须在数据库停止的情况下进行备份，数据库的读写操作不能执行。这种备份最为简单，一般只需要复制相关的数据库物理文件即可。这种方式在 MySQL 官方手册中称为 Offline Backup（离线备份）。  

温备份同样是在数据库运行中进行的，但是会对当前数据库的操作有所影响，备份时仅支持读操作，不支持写操作。  

按照备份后文件的内容，热备份又可以分为：

- 逻辑备份
- 裸文件备份

  

在 MySQL 数据库中，逻辑备份是指备份出的文件内容是可读的，一般是文本内容。内容一般是由一条条 SQL 语句，或者是表内实际数据组成。如 mysqldump 和 SELECT \* INTO OUTFILE 的方法。这类方法的好处是可以观察导出文件的内容，一般适用于数据库的升级、迁移等工作。但其缺点是恢复的时间较长。  

裸文件备份是指复制数据库的物理文件，既可以在数据库运行中进行复制（如 ibbackup、xtrabackup 这类工具），也可以在数据库停止运行时直接复制数据文件。这类备份的恢复时间往往比逻辑备份短很多。  

按照备份数据库的内容来分，备份又可以分为：

- 完全备份
- 部分备份

  

完全备份是指对数据库进行一个完整的备份，即备份整个数据库，如果数据较多会占用较大的时间和空间。  

部分备份是指备份部分数据库（例如，只备份一个表）。  

部分备份又分为：  

- 增量备份
- 差异备份

  

增量备份需要使用专业的备份工具。指的是在上次完全备份的基础上，对更改的数据进行备份。也就是说每次备份只会备份自上次备份之后到备份时间之内产生的数据。因此每次备份都比差异备份节约空间，但是恢复数据麻烦。  

差异备份指的是自上一次完全备份以来变化的数据。和增量备份相比，浪费空间，但恢复数据比增量备份简单。  

MySQL 中进行不同方式的备份还要考虑存储引擎是否支持，如 MyISAM 不支持热备，支持温备和冷备。而 InnoDB 支持热备、温备和冷备。  

一般情况下，我们需要备份的数据分为以下几种：

- 表数据
- 二进制日志、InnoDB 事务日志
- 代码（存储过程、存储函数、触发器、事件调度器）
- 服务器配置文件

  

下面是几种常用的备份工具：

- mysqldump：逻辑备份工具，适用于所有的存储引擎，支持温备、完全备份、部分备份、对于 InnoDB 存储引擎支持热备。
- cp、tar 等归档复制工具：物理备份工具，适用于所有的存储引擎、冷备、完全备份、部分备份。
- lvm2 snapshot：借助文件系统管理工具进行备份。
- mysqlhotcopy：名不副实的一个工具，仅支持 MyISAM 存储引擎。
- xtrabackup：一款由 percona 提供的非常强大的 InnoDB/XtraDB 热备工具，支持完全备份、增量备份。