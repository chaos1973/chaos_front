---
title: 实际应用中，如何将MySQL数据库迁移到其它机器
date: 2023-01-29 15:16:36
permalink: /pages/d496bc/
categories:
  - 数据库
  - mysql数据库
  - mysql数据库备份与恢复
tags:
  - 
author: 
  name: ~chao
  link: https://github.com/chaos1973/chaos_front
---
# 实际应用中，如何将MySQL数据库迁移到其它机器？

数据库迁移就是把数据从一个系统移动到另一个系统上，迁移过程其实就是在源数据库备份和目标数据库恢复的过程组合。迁移的原因是多种多样的，比如：

- 需要安装新的数据库服务器
- MySQL 版本更新
- 数据库管理系统的变更（如从 SQL Server 迁移到 MySQL）

  

根据实际操作等情况，可以将数据库迁移操作分成以下 3 种形式。  

- 相同版本 MySQL 数据库之间的迁移。
- 不同版本 MySQL 数据库之间的迁移。
- 不同数据库间的迁移。

  

下面将详细介绍数据库迁移的各种方式。

## 1\. 相同版本的迁移

相同版本的 MySQL 数据库是指主版本号一致的数据库。主版本号一致的数据库迁移最容易实现。由于迁移前后 MySQL 数据库的主版本号相同，所以可以通过复制数据库目录来实现数据库迁移。  

最安全和最常用的方式是通过使用 mysqldump 命令进行数据库备份，然后使用 mysql 命令将备份文件还原到新的 MySQL 数据库。迁移时的备份和还原操作可以同时执行。  

假设从一个名为 hostname1 的机器中备份出所有数据库，然后将这些数据库迁移到名为 hostname2 的机器上，具体语法形式如下：

mysqldump -h hostname1 -u root -password=password1 -all-databases  
|  
mysql -h hostname2 -u root -password=password2

其中：

- 符号“|”用来实现将命令 mysqldump 备份的文件送给 mysql 命令；
- password1 为 hostname1 主机上 root 用户的密码；
- password2 为 hostname2 主机上 root 用户的密码；
- \-all-databases 表示迁移全部的数据库，可省略。

  

通过上述语句就可以直接迁移。

## 2\. 不同版本的迁移

不同版本的 MySQL 数据库之间的数据迁移通常是 MySQL 升级的原因。例如，服务器使用 4.0 版本的 MySQL 数据库，现在要升级为 5.7 版本的。这样就需要不同版本的 MySQL 数据库之间进行数据迁移。  

不同版本下的数据库迁移，分为 2 种方式：

- 低版本数据库向高版本数据库进行迁移
- 高版本数据库向低版本数据库进行迁移

  

低版本数据库向高版本数据库进行迁移时，由于高版本会兼容低版本，所以该种方式也是最容易实现的操作。对于存储类型为 MyISAM 的表，最安全和最常用的操作是直接复制数据文件。对于存储类型为 InnoDB 的表，最安全和最常用的操作是执行 mysqldump 命令进行备份和执行 mysql 命令还原恢复数据。  

但是高版本数据库向低版本数据库进行迁移时，因为高版本数据库可能有一些新的特性，这些特性是低版本数据库所不具有的，所以数据库迁移时要特别小心，最好使用 mysqldump 命令来进行备份，避免迁移时造成数据丢失。  

## 3\. 不同数据库的迁移

不同数据库之间的迁移是指从其它类型的数据库迁移到 MySQL 数据库，或者从 MySQL 数据库迁移到其他类型的数据库。例如，某个网站原来使用 Oracle 数据库，因为运营成本太高等诸多原因，希望改用 MySQL 数据库。或者，某个管理系统原来使用 MySQL 数据库，因为某种特殊性能的要求，希望改用 Oracle 数据库。这样的不同数据库之间的迁移也经常会发生。但是这种迁移没有普通适用的解决办法。  

其它数据库也有类似 mysqldump 这样的备份工具，可以将数据库中的文件备份成 sql 文件或普通文本。但是，不同的数据库厂商并没有完全按照 SQL 标准来设计数据库，这就造成了不同数据库使用的 SQL 语句的差异。例如，微软的 SQL Server 软件使用的是 T-SQL 语言。T-SQL 中包含了非标准的 SQL 语句。这就造成了 SQL Server 和 MySQL 的 SQL 语句不能兼容。  

除了 SQL 语句存在不兼容的情况外，不同的数据库之间的数据类型也有差异。例如，MySQL 不支持 SQL Server 中的 ntext、 Image 等数据类型。同样，SQL Server 也不支持 MySQL 中的 ENUM 和 SET 等数据类型。数据类型的差异也造成了迁移的困难。  

从某种意义上说，这种差异是商业数据库公司故意造成的壁垒，这种行为是阻碍数据库市场健康发展的。  

但是不同数据库服务器间的迁移并不是完全不可能。在 Windows 操作系统下，如果要实现从 MySQL 数据库服务器向 SQL SERVER 数据库服务器迁移，可以通过 MyODBC 来实现；如果要实现从 MySQL 数据库服务器向 ORACLE 数据库服务器迁移，可以先通过执行 mysqldump 命令导出 sql 文件，然后手动修改 sql 文件中的 CREATE 语句。